$(document).ready((function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("#province").change((function(e){e.preventDefault();var n=$("#region"),t=$("#city"),a=$("#office"),o=$("#office_container"),c=$("#courier_container"),r=$(this).val();$.isNumeric(r)?$.ajax({url:"/province/"+r+"/region",type:"GET",async:!0,cache:!1,error:function(e){console.log($error)},success:function(e){var t=[];n.removeAttr("disabled"),n.empty();var a=document.createElement("option"),o=a.cloneNode(!0);o.text="* Please select region",t.push(o),$.each(e,(function(e,n){var o=a.cloneNode(!0);o.text=n.name,o.value=n.id,t.push(o)})),n.append(t)}}):(n.empty(),n.attr("disabled","true"),t.empty(),t.attr("disabled","true"),a.empty(),a.attr("disabled","true"),o.empty(),c.empty())})),$("#region").change((function(e){e.preventDefault();var n=$("#city"),t=$("#office"),a=$("#office_container"),o=$("#courier_container"),c=$(this).val();$.isNumeric(c)?$.ajax({url:"/region/"+c+"/city",type:"GET",async:!0,cache:!1,error:function(e){console.log($error)},success:function(e){var t=[];n.removeAttr("disabled"),n.empty();var a=document.createElement("option"),o=a.cloneNode(!0);o.text="* Please select region",t.push(o),$.each(e,(function(e,n){var o=a.cloneNode(!0);o.text=n.name,o.value=n.id,t.push(o)})),n.append(t)}}):(n.empty(),n.attr("disabled","true"),t.empty(),t.attr("disabled","true"),a.empty(),o.empty())})),$("#city").change((function(e){e.preventDefault();var n=$("#office"),t=$("#office_container"),a=$("#courier_container"),o=$(this).val();$.isNumeric(o)?$.ajax({url:"/city/"+o+"/office",type:"GET",async:!0,cache:!1,error:function(e){console.log($error)},success:function(e){var t=[];n.removeAttr("disabled"),n.empty();var a=document.createElement("option"),o=a.cloneNode(!0);o.text="* Please select region",t.push(o),$.each(e,(function(e,n){var o=a.cloneNode(!0);o.text=n.name,o.value=n.id,t.push(o)})),n.append(t)}}):(n.empty(),n.attr("disabled","true"),t.empty(),a.empty())})),$("#office").change((function(e){e.preventDefault();var n=$("#office_container"),t=$("#courier_container"),a=$(this).val();$.isNumeric(a)?$.ajax({url:"/office/"+a,type:"GET",async:!0,cache:!1,error:function(e){console.log($error)},success:function(e){if(n.empty(),t.empty(),!$.isEmptyObject(e)){var a=[],o=document.createElement("tr"),c=document.createElement("td"),r=o.cloneNode(!0),i=c.cloneNode(!0),u=c.cloneNode(!0),p=c.cloneNode(!0);$.each(e.phones,(function(e,n){i.append(n.phone+"<br />")})),u.innerHTML=e.address,p.innerHTML=e.opening_hours,r.append(i),r.append(u),r.append(p),n.append(r),$.each(e.couriers,(function(e,n){var t=o.cloneNode(!0),r=c.cloneNode(!0),i=c.cloneNode(!0),u=c.cloneNode(!0);r.innerHTML=n.user.first_name+" "+n.user.last_name,$.each(n.car,(function(e,n){i.append(n.brand+" "+n.model+" "+n.registration+"<br />")})),$.each(n.phones,(function(e,n){u.append(n.phone+"<br />")})),t.append(r),t.append(i),t.append(u),a.push(t)})),t.append(a)}}}):(n.empty(),t.empty())})),$("#uuid_autocomplete").on("input",(function(e){e.preventDefault();var n=$(this).val();$(this).autocomplete({minLength:3,source:function(e,t){$.ajax({type:"POST",url:"/courier/uuid/autocomplete",async:!0,cache:!1,dataType:"json",data:{data:n},success:function(e){t($.map(e,(function(e){return{label:e.user.first_name+" "+e.user.last_name,value:e.uuid}})))}})}})})),$("#uuid_form").on("submit",(function(e){e.preventDefault();var n=$("#uuid_autocomplete");$.ajax({type:"GET",url:"/courier/uuid/"+n.val(),async:!0,cache:!1,dataType:"json",success:function(e){n.val("");var t=document.createElement("td"),a=document.createElement("tr"),o=t.cloneNode(!0),c=t.cloneNode(!0),r=t.cloneNode(!0);o.innerHTML=e.user.first_name+" "+e.user.last_name,$.each(e.car,(function(e,n){c.append(n.brand+" "+n.model+" "+n.registration+"<br />")})),$.each(e.phones,(function(e,n){r.append(n.phone+"<br />")})),a.append(o),a.append(c),a.append(r),$("#uuid_autocomplete_container").append(a)}})}))}));